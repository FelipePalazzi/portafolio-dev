---
import Titles from "../common/Titles.astro";
import { TechIcons } from "../common/TechStack.astro";

const GroupIcons = {
  code: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>`,
  box: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></svg>`,
  tool: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>`,
  sparkles: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 7H5"/><path d="M19 21v-4"/><path d="M15 17h4"/></svg>`
};

// Tus datos
const Languages = ["JavaScript", "TypeScript", "CSharp", "Python"];
const Frameworks = [
    "React",
    "Angular",
    "Express",
    "NodeJS",
    "Tailwind",
    "Next.js",
    "Astro"
];
const Tools = ["Git", "GitHub", "PostgreSQL"];
const Others = ["TagUI"];

const skills = [
    {
        title: "Lenguajes",
        data: Languages,
        // Usamos clases específicas para cada propiedad
        styles: {
            bg: "bg-blue-500",
            text: "group-hover:text-blue-500",
            texticon: "group-hover/icon:text-blue-500",
            bgicon: "group-hover/icon:bg-blue-500/15",
            iconBg: "bg-blue-500/20 text-blue-500 group-hover:text-blue-500 group-hover:bg-blue-500/30"
        },
        icon: "code",
    },
    {
        title: "Frameworks & Libs",
        data: Frameworks,
        styles: {
            bg: "bg-pink-500",
            text: "group-hover:text-pink-500",
            texticon: "group-hover/icon:text-pink-500",
            bgicon: "group-hover/icon:bg-pink-500/15",
            iconBg: "bg-pink-500/20 text-pink-500 group-hover:text-pink-500 group-hover:bg-pink-500/30"
        },
        icon: "box",
    },
    {
        title: "Herramientas",
        data: Tools,
        styles: {
            bg: "bg-orange-500",
            text: "group-hover:text-orange-500/70",
            texticon: "group-hover/icon:text-orange-500",
            bgicon: "group-hover/icon:bg-orange-500/15",
            iconBg: "bg-orange-500/20 text-orange-500 group-hover:text-orange-500 group-hover:bg-orange-500/30"
        },
        icon: "tool",
    },
    {
        title: "Otros",
        data: Others,
        styles: {
            bg: "bg-purple-500",
            text: "group-hover:text-purple-500/70",
            texticon: "group-hover/icon:text-purple-500",
            bgicon: "group-hover/icon:bg-purple-500/15",
            iconBg: "bg-purple-500/20 text-purple-500 group-hover:text-purple-500 group-hover:bg-purple-500/30"
        },
        icon: "sparkles",
    },
];
---

<section id="skills" class="w-full max-w-7xl mx-auto px-4 py-20">
    <Titles title="Habilidades" idLink="skills" />

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-10">
        {
            skills.map((skillGroup) => (
                <div
                    class="
                relative overflow-hidden p-6 rounded-3xl h-full
                border-2 border-white/10 bg-primary-100/50 shadow-lg shadow-primary-500/40
                backdrop-blur-md hover:border-white/40 hover:bg-primary-300/50
                transition-all duration-300 group
            "
                >
                    {/* Fondo brillante decorativo según el color del grupo */}
                    <div
                        class={`absolute -right-6 -top-6 w-28 h-28 rounded-full ${skillGroup.styles.bg} opacity-40 blur-3xl group-hover:opacity-40 transition-opacity`}
                    />

                    {/* Título del grupo */}
                    <h3
                        class={`text-xl font-mono text-primary-500/80 ${skillGroup.styles.text} mb-6 flex items-center gap-2`}
                    >
                       <div 
                        class={`w-10 h-10 rounded-lg flex items-center justify-center p-2 transition-all duration-300 ${skillGroup.styles.iconBg}`}
                        set:html={GroupIcons[skillGroup.icon as keyof typeof GroupIcons]}
                    />
                        {skillGroup.title}
                    </h3>

                    {/* Grid de Iconos */}
                    <div class="grid grid-cols-3 gap-4">
                        {skillGroup.data.map((techName) => (
                            <div class="flex flex-col items-center gap-2 group/icon">
                                <div
                                    class={`
                                w-12 h-12 rounded-xl bg-primary-200/40 border border-white/10
                                flex items-center justify-center group-hover:bg-white/80
                                group-hover/icon:scale-110 ${skillGroup.styles.bgicon} group-hover/icon:border-white/30
                                transition-all duration-300
                            `}
                                >
                                    {/* Verificamos si existe el icono en TechIcons, si no, mostramos un fallback */}
                                    {TechIcons[
                                        techName as keyof typeof TechIcons
                                    ] ? (
                                        <img
                                            src={
                                                TechIcons[
                                                    techName as keyof typeof TechIcons
                                                ]
                                            }
                                            alt={techName}
                                            class="w-7 h-7 object-contain opacity-80 group-hover/icon:opacity-100"
                                            loading="lazy"
                                        />
                                    ) : (
                                        <span class="text-xs text-white">
                                            ?
                                        </span>
                                    )}
                                </div>
                                <span
                                    class={`text-shadow-sm text-[12px] font-mono text-primary-500 opacity-70 group-hover/icon:opacity-100 ${skillGroup.styles.texticon} group-hover:text-primary-800 transition-opacity`}
                                >
                                    {techName}
                                </span>
                            </div>
                        ))}
                    </div>
                </div>
            ))
        }
    </div>
</section>
